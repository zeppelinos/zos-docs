<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Upgradeability Governance in ZeppelinOS · ZeppelinOS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Upgradeability Governance in ZeppelinOS · ZeppelinOS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.zeppelinos.org/index.html"/><meta property="og:description" content="## Introduction"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102575245-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,700,400italic,700italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="ZeppelinOS"/><h2 class="headerTitleWithLogo">ZeppelinOS</h2></a><a href="/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/deploying.html" target="_self">Quickstart</a></li><li class=""><a href="/docs/next/apis.html" target="_self">Reference</a></li><li class=""><a href="https://blog.zeppelinos.org" target="_self">Blog</a></li><li class=""><a href="https://github.com/zeppelinos" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>GUIDES</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>OVERVIEW</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/start.html">ZeppelinOS</a></li><li class="navListItem"><a class="navItem" href="/docs/next/new_2.html">What&#x27;s new in ZeppelinOS 2.0</a></li></ul></div><div class="navGroup navGroupActive"><h3>QUICKSTART</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/deploying.html">Deploying your first project</a></li><li class="navListItem"><a class="navItem" href="/docs/next/upgrading.html">Upgrading your project</a></li><li class="navListItem"><a class="navItem" href="/docs/next/linking.html">Linking to EVM packages</a></li><li class="navListItem"><a class="navItem" href="/docs/next/publishing.html">Publishing an EVM package</a></li></ul></div><div class="navGroup navGroupActive"><h3>GUIDES</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/writing_contracts.html">Writing upgradeable contracts</a></li><li class="navListItem"><a class="navItem" href="/docs/next/testing.html">Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/next/erc20_onboarding.html">Onboarding legacy contracts</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/next/upgradeability_governance.html">Upgradeability governance</a></li><li class="navListItem"><a class="navItem" href="/docs/next/zos_lib.html">Using the ZeppelinOS programmatic library</a></li></ul></div><div class="navGroup navGroupActive"><h3>ADVANCED TOPICS</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/configuration.html">Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/next/architecture.html">Contracts Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/next/pattern.html">The ZeppelinOS Upgrades Pattern</a></li><li class="navListItem"><a class="navItem" href="/docs/next/whitepaper.html">Whitepaper</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Upgradeability Governance in ZeppelinOS</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>ZeppelinOS provides the chance to have upgradeable smart contracts which follows the immutability rules guaranteed by
the Ethereum blockchain. However, it is desirable to have a mechanism that allows all parties involved to decide on
whether a contract should be upgraded or not, instead of having an unilateral decision.</p>
<p>Given that there are many projects already working on really good solutions to achieve decentralized governance,
we've been exploring some of them to study how they can be integrated with ZeppelinOS to manage contracts upgradeability.
In this case, we will use a multisignature wallet.</p>
<h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2>
<p>A multisig is a contract that can execute arbitrary transactions, with the restriction that a certain number of owners
must agree upon them. We highly recommend using the <a href="https://github.com/gnosis/MultiSigWallet">Gnosis MultiSig Wallet</a>,
which was <a href="https://blog.zeppelin.solutions/gnosis-multisig-wallet-audit-d702ff0e2b1e">audited by the Zeppelin team</a> and
has a <a href="https://wallet.gnosis.pm/">useful dApp</a> for submitting and confirming transactions. You can use it easily to
deploy your own multisig wallet.</p>
<p><img src="https://lh5.googleusercontent.com/CqtaZkTZqJ_jT9vdQdPj-CNj304InYItfIBi5LnWrnsySGNOpN0HVu9DFIZbE1TpIq20ZN-3bAB1fNhFQiD_fTKqoLFyzQR7bLmmyfMJZABQMYMOnOzfTrsAkk_sgxeEQTriSJAB" alt=""></p>
<p>Once inside your ZeppelinOS project, let's suppose we have an arbitrary contract called <code>MyContract</code>. Now let's see how
we can create an upgradeable instance of it being handled by a multisig wallet. In order to do that, we will need first
to register this contract, push it to the network and create a new upgradeable instance of it as we explained in the
previous sections:</p>
<pre><code class="hljs css sh">zos add MyContract
zos push -n ropsten
zos create MyContract -n ropsten
</code></pre>
<p>We have our contract deployed to the <code>ropsten</code> network, with an instance of our <code>MyContract</code> contract up and running.
At this point, the ownership of the project is being controlled by the deployer account, which can unilaterally
decide when to upgrade any of its contracts.</p>
<h2><a class="anchor" aria-hidden="true" id="transferring-control"></a><a href="#transferring-control" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transferring control</h2>
<p>Since we want to avoid having a single account with full control over our <code>MyContract</code> instance, we’ll transfer control
of it to our multisig contract. To do this, we’ll use the <code>set-admin</code> command to yield control to the multisig account.</p>
<pre><code class="hljs css sh">zos <span class="hljs-built_in">set</span>-admin [MYCONTRACT_ADDRESS] [MULTISIG_ADDRESS] -y
</code></pre>
<blockquote>
<p>Please remember to replace <code>[MYCONTRACT_ADDRESS]</code> by the address of the upgradeable instance of <code>MyContract</code> we
created above. Additionally, <code>[MULTISIG_ADDRESS]</code> should be replaced by the address of your multisig wallet contract.</p>
</blockquote>
<blockquote>
<p>The <code>-y</code> option is mandatory to carry out this action. Bear in mind that this could be an irreversible operation in
case you specify an incorrect admin address.</p>
</blockquote>
<p>Now, if we want to upgrade our <code>MyContract</code> instance to a new version, we’ll need to perform the operation from the
multisig contract. Note that we have transferred only the ownership of our <code>MyContract</code> instance. If we had created
more instances of <code>MyContract</code>, or of any other contract, they would still be under control of the deployer account.</p>
<p>The same applies to our ZeppelinOS app. This allows us to keep interacting with our project via the CLI, by creating new
instances or registering new logic contracts, as we’ll be doing in the next step.</p>
<h2><a class="anchor" aria-hidden="true" id="uploading-a-new-version"></a><a href="#uploading-a-new-version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uploading a new version</h2>
<p>Let’s suppose we extend the functionality somehow. The first step is to upload this new logic contract to the blockchain.
Since the whole project is still managed by our deployer account, we can easily do that from the CLI by running:</p>
<pre><code class="hljs css sh">zos add MyContract
zos push
</code></pre>
<p>Now that our new logic contract is uploaded to the network, we can proceed to upgrade our <code>MyContract</code> instance.</p>
<h2><a class="anchor" aria-hidden="true" id="upgrading-our-contract-instance"></a><a href="#upgrading-our-contract-instance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Upgrading our contract instance</h2>
<p>At this point, if we attempt to upgrade our <code>MyContract</code> instance to the new version through the CLI, we’ll get an error
since the deployer account no longer has upgradeability rights over the contract instance. We need to go through the
multisig to perform this operation, as the CLI’s account.</p>
<p>Let’s submit a transaction to the multisig wallet for our contract instance to be upgraded. We can do this from the
Gnosis dApp by including the contract’s ABI and choosing to invoke <code>upgradeTo</code>. We also need to supply the address of
the new implementation, which can be found in the output of the last <code>zos push</code> command or in the <code>zos.ropsten.json</code>
file.</p>
<p><img src="https://lh3.googleusercontent.com/Wi76B5WGVs8_qGD1GPVYpA5oOF4hEVt1mfl1grCszZRfxRlkPS1PsPxm9-Kpm0NfX0qlmq-5rUNfXdEJrIlH8gJK9TNW7NjlZ_QVqAuv5JZRFW-zQNxATQpA9OapPq_6J85nzTLz" alt=""></p>
<p>This will create a new transaction in the multisig wallet for the <code>MyContract</code> instance to be upgraded to the latest
<code>MyContract</code> implementation. However, since this requires the approval of at least another multisig owner, the upgrade
is still pending.</p>
<p><img src="https://lh3.googleusercontent.com/twzAZicQUubRZaPJpj0ZmjnRICKKkC28LyP6p-CgHH15N3ZVqrlOXuptOBR_hRbIqAxLF8K5sW9SnX3QjidDEKZ2fZ8BBdSGZXn_oibjWOm4Vgu1BshMN3zTgWM6KCafAcN2saHI" alt=""></p>
<p>As soon as another owner of the multisig account confirms this transaction, it will be executed on the spot and our
<code>MyContract</code> instance contract will be upgraded to the desired version, allowing us to make use of the new functionality
we built.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="erc20_onboarding.html">← Onboarding legacy contracts</a><a class="docs-next button" href="zos_lib.html">Using the ZeppelinOS programmatic library →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/symbol-zeppelin.png" alt="ZeppelinOS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/start.html">Guides</a><a href="/docs/apis.html">Reference</a></div><div><h5>More</h5><a href="https://zeppelinos.org">Main Site</a><a href="https://blog.zeppelinos.org">Blog</a><a href="https://github.com/zeppelinos">GitHub</a></div></section><a href="https://zeppelinos.org" target="_blank" class="fbOpenSource"><img src="/img/logo.svg" alt="ZeppelinOS" width="170" height="45"/></a><section class="copyright">Copyright © 2017-present ZeppelinOS Global</section><section class="report-bugs"><a href="https://github.com/zeppelinos/zos/issues/new?labels=kind:documentation">Report a bug on this site</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '8d0b5afbba49947d9efb5659d1b08df7',
                indexName: 'zeppelinos',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>