<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Frequently asked questions · ZeppelinOS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Frequently asked questions · ZeppelinOS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.zeppelinos.org/index.html"/><meta property="og:description" content="## Is it safe to upgrade a contract compiled with a version of Solidity to another compiled with a different version?"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102575245-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,700,400italic,700italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="ZeppelinOS"/></a><a href="/versions.html"><h3>2.2.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/start.html" target="_self">Quickstart</a></li><li class=""><a href="/docs/apis.html" target="_self">Reference</a></li><li class=""><a href="https://blog.zeppelinos.org" target="_self">Blog</a></li><li class=""><a href="https://forum.zeppelin.solutions" target="_self">Forum</a></li><li class=""><a href="https://github.com/zeppelinos" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>ADVANCED TOPICS</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>OVERVIEW</h3><ul><li class="navListItem"><a class="navItem" href="/docs/start.html">ZeppelinOS</a></li><li class="navListItem"><a class="navItem" href="/docs/new_2.html">What&#x27;s new in ZeppelinOS 2.0</a></li><li class="navListItem"><a class="navItem" href="/docs/new_2.2.html">What&#x27;s new in ZeppelinOS 2.2</a></li></ul></div><div class="navGroup navGroupActive"><h3>QUICKSTART</h3><ul><li class="navListItem"><a class="navItem" href="/docs/zepkit.html">ZepKit</a></li><li class="navListItem"><a class="navItem" href="/docs/deploying.html">Deploying your first project</a></li><li class="navListItem"><a class="navItem" href="/docs/upgrading.html">Upgrading your project</a></li><li class="navListItem"><a class="navItem" href="/docs/linking.html">Linking to EVM packages</a></li><li class="navListItem"><a class="navItem" href="/docs/publishing.html">Publishing an EVM package</a></li><li class="navListItem"><a class="navItem" href="/docs/vouching.html">Vouching for EVM packages</a></li></ul></div><div class="navGroup navGroupActive"><h3>GUIDES</h3><ul><li class="navListItem"><a class="navItem" href="/docs/writing_contracts.html">Writing upgradeable contracts</a></li><li class="navListItem"><a class="navItem" href="/docs/testing.html">Testing upgradeable projects</a></li><li class="navListItem"><a class="navItem" href="/docs/erc20_onboarding.html">Onboarding ERC20 tokens</a></li><li class="navListItem"><a class="navItem" href="/docs/upgrades_governance.html">Upgrades governance</a></li><li class="navListItem"><a class="navItem" href="/docs/zos_lib.html">Using the ZeppelinOS programmatic library</a></li></ul></div><div class="navGroup navGroupActive"><h3>ADVANCED TOPICS</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/faq.html">Frequently asked questions</a></li><li class="navListItem"><a class="navItem" href="/docs/configuration.html">Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture.html">Contracts Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/pattern.html">ZeppelinOS Upgrades Pattern</a></li><li class="navListItem"><a class="navItem" href="/docs/token_mechanics.html">ZEP Token Mechanics</a></li><li class="navListItem"><a class="navItem" href="/docs/whitepaper.html">Whitepaper</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Frequently asked questions</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="is-it-safe-to-upgrade-a-contract-compiled-with-a-version-of-solidity-to-another-compiled-with-a-different-version"></a><a href="#is-it-safe-to-upgrade-a-contract-compiled-with-a-version-of-solidity-to-another-compiled-with-a-different-version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Is it safe to upgrade a contract compiled with a version of Solidity to another compiled with a different version?</h2>
<p>Yes. The Solidity team guarantess that the compiler <a href="https://twitter.com/ethchris/status/1073692785176444928">preserves storage layout among versions</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="is-it-possible-to-specify-which-solidity-compiler-version-to-use-in-zeppelinos"></a><a href="#is-it-possible-to-specify-which-solidity-compiler-version-to-use-in-zeppelinos" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Is it possible to specify which Solidity compiler version to use in ZeppelinOS?</h2>
<p>Yes. As of ZeppelinOS version 2.1, you can specify which compiler version to use in <code>truffle.js</code>, as you do with Truffle (version 5):</p>
<pre><code class="hljs">module.exports = {
  network<span class="hljs-variable">s:</span> {
    ... etc ...
  },
  <span class="hljs-keyword">compiler</span><span class="hljs-variable">s:</span> {
     solc: {
       <span class="hljs-keyword">version</span>: <span class="hljs-symbol">&lt;string&gt;</span>  // example:  <span class="hljs-string">"0.4.24"</span> <span class="hljs-built_in">or</span> <span class="hljs-string">"0.5.0"</span>
     }
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="why-are-my-getting-the-error-cannot-call-fallback-function-from-the-proxy-admin"></a><a href="#why-are-my-getting-the-error-cannot-call-fallback-function-from-the-proxy-admin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why are my getting the error &quot;Cannot call fallback function from the proxy admin&quot;?</h2>
<p>This is due to the <a href="https://docs.zeppelinos.org/docs/pattern.html#transparent-proxies-and-function-clashes">transparent proxy pattern</a>. You shouldn't get this error when using ZeppelinOS via de CLI, because ZeppelinOS uses the ProxyAdmin contract. More info in the <a href="https://docs.zeppelinos.org/docs/new_2.2.html">What's new in ZeppelinOS 2.2</a> section of the documentation.</p>
<p>However, if you are using ZeppelinOS programmatically, you could run into such error. The solution is to always interact with your proxies from an account that is not the admin of the proxy, unless of course you want to specifically call functions of the proxy itself.</p>
<h2><a class="anchor" aria-hidden="true" id="how-do-i-use-es6-javascript-syntax-in-my-tests"></a><a href="#how-do-i-use-es6-javascript-syntax-in-my-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I use ES6 Javascript syntax in my tests?</h2>
<p>First, make sure you add the following dev-dependencies to your project: <code>babel-polyfill</code>, <code>babel-register</code>, <code>babel-preset-es2015</code>, <code>babel-preset-stage-2</code> and <code>babel-preset-stage-3</code>.
<code>npm install --save-dev babel-polyfill babel-register babel-preset-es2015 babel-preset-stage-2 babel-preset-stage-3</code>
Next, create a <code>.babelrc</code> file at the root of your repo, containing:</p>
<pre><code class="hljs">{
  <span class="hljs-attr">"presets"</span>: [<span class="hljs-string">"es2015"</span>, <span class="hljs-string">"stage-2"</span>, <span class="hljs-string">"stage-3"</span>]
}
</code></pre>
<p>Finally, make sure your <code>truffle-config.js</code> file contains the following lines at the beginning of the file:</p>
<pre><code class="hljs"><span class="hljs-built_in">require</span>(<span class="hljs-string">'babel-register'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'babel-polyfill'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-can-i-create-an-upgradeable-instance-from-solidity-code"></a><a href="#how-can-i-create-an-upgradeable-instance-from-solidity-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How can I create an upgradeable instance from Solidity code?</h2>
<p>You can create upgradeable instances from Solidity code by using your project's App contract, and then calling its <code>create</code> function from Solidity. Note that to be able to do this, your project needs to be published, i.e. it needs to have the ZeppelinOS <a href="https://docs.zeppelinos.org/docs/architecture.html">Contracts Architecture</a> enabled.</p>
<p>To see an example of how this is done, please refer to the example project <a href="https://github.com/zeppelinos/zos/tree/master/examples/creating-instances-from-solidity">creating-instances-from-solidity</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="zos_lib.html">← Using the ZeppelinOS programmatic library</a><a class="docs-next button" href="configuration.html">Configuration Files →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/symbol-zeppelin.png" alt="ZeppelinOS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/start.html">Guides</a><a href="/docs/apis.html">Reference</a></div><div><h5>Community</h5><a href="https://forum.zeppelin.solutions/" target="_blank">Forum</a><a href="https://t.me/zeppelinos/" target="_blank">Telegram chat</a></div><div><h5>More</h5><a href="https://zeppelinos.org">Main Site</a><a href="https://blog.zeppelinos.org">Blog</a><a href="https://github.com/zeppelinos">GitHub</a></div></section><a href="https://zeppelinos.org" target="_blank" class="fbOpenSource"><img src="/img/logo.svg" alt="ZeppelinOS" width="170" height="45"/></a><section class="copyright">Copyright © 2017-present ZeppelinOS Global</section><section class="report-bugs"><a href="https://github.com/zeppelinos/zos/issues/new?labels=kind:documentation">Report a bug on this site</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '8d0b5afbba49947d9efb5659d1b08df7',
                indexName: 'zeppelinos',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>